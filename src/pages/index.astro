---
import Layout from '@layouts/Layout.astro';
import '@styles/global.css';
import TabScript from "./_index/TabScript.astro";
import ProgramComparison from "./_index/ProgramComparison.astro";

const tabFiles = import.meta.glob('./_index/tabs/*.astro', { eager: true });

const tabCollection = Object.entries(tabFiles).map(([_, module]: any) => {
    return {
        id: module.data.id,
        data: module.data,
        open: module.data.order === 0,
        content: module.default,
    };
}).sort((o1, o2) => o1.data.order - o2.data.order);
---

<Layout fullTitle="PixiEditor">
    <section class="container mx-auto flex flex-col items-center text-center mt-10">
        <h2 class="text-pc-softpixired">Open source & free</h2>
        <h1 class="text-2xl font-bold">
            Universal 2D graphics platform <br>
            - one to rule them all</h1>

        <a class="px-button-soft mt-6" href="/download">Download now!</a>
    </section>

    <section class="container max-w-screen-lg mx-auto">
        <div class="flex justify-center gap-6 max-md:hidden mt-14">
            {tabCollection.map((tab) => (
                    <button class="w-28 flex flex-col items-center tab-button" name={tab.id} id=`${tab.id}-button` aria-controls={tab.id} role="tab">
                        <tab.data.iconType
                                data={tab.data.icon}
                                class={`text-5xl text-${tab.data.colorClass}`}
                        />
                        <h2 class="font-semibold mt-3">
                            {tab.data.title}
                        </h2>
                        <div class=`opacity-0 aria-selected-parent:opacity-100 rounded-full bg-${tab.data.colorClass} w-full h-[3px]`></div>
                    </button>
            ))}
        </div>

        <div class="mt-6">
            {tabCollection.map((tab) => (
                    <details name="features" id={tab.id} class="tab-panel" open={tab.open} role="tabpanel" aria-labelledby=`${tab.id}-button`>
                        <summary class="md:hidden list-none flex justify-between items-center px-6 py-3 border-b border-b-neutral-700">
                            <div>
                                <tab.data.iconType
                                        data={tab.data.icon}
                                        class={`text-2xl inline align-middle text-${tab.data.colorClass}`}
                                />
                                <h2 class={`font-bold inline align-middle`}>
                                    {tab.data.title}
                                </h2>
                            </div>
                            <tab.data.iconType data="chevron-down" />
                        </summary>

                        <div class="bg-neutral-900 w-full md:h-[37rem] lg:rounded p-4">
                            <tab.content />
                        </div>
                    </details>
            ))}
        </div>

        <TabScript />
    </section>

    <div class="bg-neutral-900 mt-12 py-12">
        <section class="container mx-auto">
            <h1 class="text-center text-3xl">What <span class="font-bold">can you make</span> in PixiEditor?</h1>
        </section>
    </div>

    <section class="container mx-auto py-12">
        <h1 class="text-center text-3xl">What program <span class="font-bold">is the best</span> for me?</h1>

        <ProgramComparison />
    </section>

    <div class="bg-neutral-900 mt-12 py-12">
        <section class="container max-w-screen-lg mx-auto overflow-hidden">
            <h1 class="text-center text-3xl">Explore our <span class="font-bold">roadmap</span></h1>
            
            <div class="flex gap-6 mt-12 overflow-x-scroll px-4">
                <div class="w-1/3 bg-neutral-800 p-4 rounded text-lg">
                    <h1 class="text-3xl">Q1 2025</h1>
                    <ul class="list-disc ps-6">
                        <li>Awesome feature</li>
                        <li>More cool shit</li>
                        <li>Lots of stuff</li>
                        <li>Lorem</li>
                        <li>Ipsum</li>
                    </ul>
                </div>

                <div class="w-1/3 bg-neutral-800 p-4 rounded text-lg">
                    <h1 class="text-3xl">Q2 2025</h1>
                    <ul class="list-disc ps-6">
                        <li>Coming soon...</li>
                        <li>Exciting plans ahead...</li>
                        <li>Stay tuned!</li>
                    </ul>
                </div>

                <div class="w-1/3 bg-neutral-800 p-4 rounded text-lg">
                    <h1 class="text-3xl">Q3 2025</h1>
                    <ul class="list-disc ps-6">
                        <li>More updates coming soon...</li>
                        <li>Innovative features on the way...</li>
                        <li>Keep an eye on this space!</li>
                        <li>Ipsum had a Lorem</li>
                        <li>But Lorem Ipsumd too hard</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <section class="container mx-auto py-12">
        <h1 class="text-center text-3xl">What are <span class="font-bold">the User</span> saying?</h1>
    </section>

    <section class="container mx-auto py-12">
        <h1 class="text-center text-3xl">Become a part of the <span class="font-bold">PixiEditor community</span></h1>
    </section>

    <section class="container mx-auto py-12">
        <h1 class="text-center text-3xl"><span class="font-bold">Support us with</span></h1>
    </section>

</Layout>
